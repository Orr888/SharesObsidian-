# Создание папки по имени файла и перемещение его в новосозданную папку (Скрипт работает со списком файлов)

Данный скрипт считывает каждую строку со списком имен из файла `list.txt`, удаляет последнее расширение, если оно имеется, из имени файла для создания папки (то есть удаляет все после последней точки), создает папку с этим именем, а затем перемещает файл с этим именем в эту папку. 


Необходимо в папке с файлами создать файл скрипта `directories.sh` и поместит скрипт в него, затем там же создаем файл `list.txt` и помещаем в него список с именами файлов. Имена файлов обязательно должны содержать расширения файлов (В нашем случае `.mp4`) так же могут содержать точки, пробелы, и прочие допустимые символы. Каждое название файла должно размещаться на новой строке. Пустых строк в файле не должно быть.


Обратите внимание, что этот скрипт удаляет только последнее расширение из имени файла. Если в имени файла есть несколько точек, все, что находится до последней точки, будет использоваться для создания имени папки. Например, если имя файла `my.video.mp4`, то будет создана папка `my.video` и файл `my.video.mp4` будет перемещен в эту папку.


Для правильной работы скрипта необходимо запустить его в каталоге с файлами и иметь необходимые разрешения для создания папок и перемещения файлов.


```bash
#!/bin/bash

############
# Описание работы скрипта
#############
# Данный скрипт считывает каждую строку со списком имен из файла "list.txt", удаляет последнее расширение, если оно имеется, из имени файла для создания папки (то есть удаляет все после последней точки), создает папку с этим именем, а затем перемещает файл с этим именем в эту папку. 
#############
# Необходимо в папке с файлами создать файл скрипта "directories.sh" и поместит скрипт в него, затем там же создаем файл "list.txt" и помещаем в него список с именами файлов. Имена файлов обязательно должны содержать расширения файлов (В нашем случае ".mp4") так же могут содержать точки, пробелы, и прочие допустимые символы. Каждое название файла должно размещаться на новой строке. Пустых строк в файле не должно быть.
#############
#Обратите внимание, что этот скрипт удаляет только последнее расширение из имени файла. Если в имени файла есть несколько точек, все, что находится до последней точки, будет использоваться для создания имени папки. Например, если имя файла "my.video.mp4", то будет создана папка "my.video" и файл "my.video.mp4" будет перемещен в эту папку.
#############
#Для правильной работы скрипта необходимо запустить его в каталоге с файлами и иметь необходимые разрешения для создания папок и перемещения файлов.
#############

# Начало скрипта

#!/bin/bash

# Имя файла со списком
filename="list.txt"

# Проверяем каждую строку в файле
while IFS= read -r line
do
    # Удаляем расширение из имени файла для создания папки
    foldername="${line%.*}"

    # Создаем папку, если она еще не существует
    mkdir -p "$foldername"

    # Перемещаем видео файлы в соответствующую папку
    find . -maxdepth 1 -name "$line" -exec mv {} "$foldername" \;
done < "$filename"

# Конец скрипта.
```

# Как найти недавно измененные файлы за последние 5 минут:

```bash
find . -type f -mmin -5
```
Помогает при отладке и устранении неполадок.

# nohup - no hangup

Когда вы запускаете программу в терминале или по SSH, она будет завершена, как только закончится терминальная сессия или оборвется соединение. 

Чтобы избежать этого и сохранить работу программы и всех ее процессов, используйте команду nohup, сокращение от "no hangup". Она игнорирует все сигналы о зависании, позволяя процессу продолжаться, даже если терминальная сессия прервана.

Например, чтобы сжать большой объем данных с помощью команды tar и гарантировать, что сжатие продолжится, даже если вы случайно закроете окно терминала, используйте следующую команду:

```bash
nohup tar -cf archive.tar file1 file2
```

Команда nohup также создает файл с именем nohup.out для хранения вывода команды.

```bash
cat nohup.out
```

В качестве альтернативы можно использовать tmux, disown или screen.

# Поиск ключевых слов в man

Чтобы найти команды, связанные с grep, введите:

```bash
man -k grep
```

# Как легко созать несколько дочерних каталогов, если родительского каталога не существует

```bash
mkdir -vp songs/{artists,albums,genres/{classical,pop}}
```

Параметр -p позволяет создать вложенную структуру каталогов

Параметр -v предназначена для режима verbose, чтобы вы могли видеть, какие каталоги были созданы

С низу показано какую труктуру каталогов создаст команда:

```bash
mkdir -vp songs/{artists,albums,genres/{classical,pop}}
mkdir: создан каталог 'songs'
mkdir: создан каталог 'songs/artists'
mkdir: создан каталог 'songs/albums'
mkdir: создан каталог 'songs/genres'
mkdir: создан каталог 'songs/genres/classical'
mkdir: создан каталог 'songs/genres/pop'
```

# Разрешения на файлы в каталог при его создании

Чтобы добавить различные разрешения на файлы в каталог при его создании, используйте команду: 

```bash
mkdir -m 766 new_directory 
```

Где, -m должно получить значения, как в команде chmod

# Выключения Linux из терминала

> Обычно для выключения Linux из терминала используется утилита `shutdown`. Есть также команды `poweroff`, `halt`, но они для нестандартных случаев.

Синтаксис команды `shutdown` очень прост:

```bash
shutdown [опции] [время] [сообщение]
```

- ▪Опции задают параметры отключени.

- ▪Время можно задавать в виде чч:мм в 24 часовом формате. Также можно использовать запись +минуты, указывающую через сколько минут от текущего момента нужно выключить компьютер с Linux. Вы можете использовать константу now, указывающую, что выключать нужно прямо сейчас. 

- ▪Параметр сообщение позволяет задать сообщение, которое будет выведено в терминал перед выключением.

Вот основные опции утилиты:

--help -  справка по программе
-H, --halt - отключить питание, не завершая процессы и не перемонтируя файловые системы
-P, --poweroff - нормальное выключение
-r, --reboot - перезагрузка
-k - не выполнять реальных действий, а только вывести сообщение
--no-wall - выключить компьютер, но не выводить сообщение
-c - отменить запланированное выключение linux из командной строки

Выключение компьютера немедленно:

```bash
sudo shutdown -h now
```

Как видите, используется обычное выключение, и константа времени now, тоесть сейчас.

Теперь попробуем запланировать выключение компьютера linux через пять минут:

```bash
sudo shutdown -h +5 "Компьютер будет выключен через 5 минут"
```

Мы запланировали вывод сообщения перед выключением. Чтобы отменить команду shutdown выполните:

```bash
sudo shutdown -c
```

Точно так же мы можем указать точное время выключения, например в десять вечера:

```bash
sudo shutdown -h 22:00
```
