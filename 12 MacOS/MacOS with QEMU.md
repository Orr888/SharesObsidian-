# [MacOS with QEMU](https://github.com/quickemu-project/)

[How to run macOS on Linux (without too much hassle)](https://www.youtube.com/watch?v=Qa6y_CiyAMA)  


Перед установкой QuickEMU нужно установить QEMU с фулл конфигурацией:
```
yay -Sy qemu-full
```
Теперь можно ставить QuickEMU 
```
yay -Sy quickemu
```
Пользуемся в терминале:  
Сначало переходим в папку с виртуальными машинами:
```
cd QEMU-VM/
```
Далее вводим `quickget` чтобы увидеть список возможных операционных систем.  
Далее находим нужную и вводим в терминале `quickget macos` чтобы вышел список версий ОС.  
Далее выбираем из списка и вводим уже команду для установки выбранной версии:
```
quickget macos big-sur
```
Создается папка `macos-big-sur` и файл конфигурации `macos-big-sur.conf`.
Делаем изменения в файле `macos-big-sur.conf` следующим образом:
Меняем размер диска с 128 Гигобайт на 80 гигов, добавляем количество ядер процессора и оперативную память.
Изначально файл будет таким:
```
#!/usr/bin/quickemu --vm
guest_os="macos"
disk_img="macos-big-sur/disk.qcow2"
img="macos-big-sur/RecoveryImage.img"
disk_size="128G"
macos_release="big-sur"
```
после изменения таким:
```
#!/usr/bin/quickemu --vm
guest_os="macos"
disk_img="macos-big-sur/disk.qcow2"
img="macos-big-sur/RecoveryImage.img"
disk_size="80G"
macos_release="big-sur"
cpu_cores=3
ram="8G"
```
После этих изменений можно приступать к закачке ОС. Для этого вводим команду:
```
quickemu --vm macos-big-sur.conf
```
Если закачка не началась или закончилась с ошибкой, то переходим к устанвке графического интерфейса. Для этого вводим команду:
```
yay -S quickgui
```
Процесс долгий. Ждем. Ставим только так, через командную строку, так как с appimage не работает.  
После установки запускаем программу. В ней создаем необходимую ОС, но редактируем так же конфиг файл. А после этого если опять не создался то возвращаемся в терминал и там повторно запускаем комагду скачивания ОС:
```
quickemu --vm macos-big-sur.conf
```
Должно скачаться и запуститься.  

## ДОПОЛНИТЕЛЬНО:  
> После завершения работы встроенного мастера нужно включить функцию TRIM,  
> которая создана для SSD-дисков. Эта функция в нашей установке macOS будет разрешать  
> QuickEmu сжимать образ диска MacOS всякий раз, когда вы удаляете файлы внутри виртуальной машины.  
> Без этого шага ваш Образ диска macOS будет увеличиваться даже когда вы удаляете много данных внутри macOS.  
> Чтобы включить TRIM, откройте приложение «Терминал» и введите команду:

```
sudo trimforce enable
```
Команда запросит подтверждение в виде двух вопросов, которые требуют ввода «да».  
Система автоматически перезагрузится.  

ГОТОВО!

# Магазин приложений MacOS

Если при попытке войти в App Store вы видите сообщение «Ваше устройство или компьютер не удалось проверить», убедитесь, что ваше проводное сетевое устройство en0 использовав `ifconfig` в терминале.

Если проводное сетевое устройство не en0, перейдите в «Системные настройки» -> «Сеть», удалите все сетевые устройства и примените изменения. Затем в терминале выполните следующее:
```
sudo rm /Library/Preferences/SystemConfiguration/NetworkInterfaces.plist
```
Перезагрузитесь. App Store должен заработать. 

# ССЫЛКИ НА ПРОЕКТЫ:

## [QuickEMU](https://quickemu-project.github.io/) - запускайте оптимизированные виртуальные машины Windows, macOS и Linux из терминала на Linux и macOS.
## [QuickGUI](https://github.com/quickemu-project/quickgui) - графичсекий интерфейс для QuickEMU для Linux и macOS.


