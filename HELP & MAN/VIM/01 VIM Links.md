# ВИЗУАЛЬНАЯ Шпаргалка
## http://www.viemu.com/a_vi_vim_graphical_cheat_sheet_tutorial.html
</br></br></br>

# Работа с файлами 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
:q! - закрыть файл без сохранения;
:qa! - закрыть все файлы без сохранения;
:wq - закрыть и сохранить файл;
:wqa - закрыть все файлы с сохранением.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

# Перемещение по тексту
## VIM обладает большими возможностями для ускорения работы с текстом и имеет большое количество команд для перемещения по тексту.
## Для перемещения можно использовать стрелочки, а также h (Влево), l (Вправо), j (Вниз), k (Вверх).
## Другие команды для перемещения по тексту:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
|, 0, home — в начало строки;
^ — на первый непустой символ в строке;
$, end — в конец строки;
m — на половину ширины экрана;
g — на нижнюю строку;
e — до конца слова;
- — на строку вверх и на первый непустой символ;
+, Enter — на строку вниз и на первый непустой символ;
G — на последнюю строку;
H — на первую строку экрана;
M — на среднюю строку экрана;
L — на последнюю строку экрана;
w — на слово вперед;
b — на слово назад;
( — на предложение назад (до точки);
) — на предложение вперед (до точки);
{ — на абзац назад (до пустой строки);
} — на абзац вперед (до пустой строки);
:ju — список переходов.
2w — Перемещение курсора вперёд к началу второго слова.
3e — Перемещение курсора вперёд к концу третьего слова.
% — Перемещение в строке между скобками: (){}[]
507 Shift+g — Например вот так будет переход не в конец, а к строке номер 507
:45 Enter или 45gg — Переход к строке номер 45
Вместо k может быть любая маленькая буква для локальных меток, и большая для глобальных, к которым можно обращаться из другого файла.mk — Пометить текущую позицию как k
‘k — Перейти к раннее созданной метке k
'. — (backquote, dot) перейти по автоматической метке в начало последней отредактированной строки.
H, M, L — перемещение курсора на верхнюю, среднюю и нижнюю линию экрана.
zt, zz, zb — перемещение курсора вместе с текстом на верхнюю, среднюю и нижнюю линию экрана.
* — Переместить курсор на следующее слово, такое же, как под курсором
# — Переместить курсор на ПРЕДЫДУЩЕЕ слово, такое же, как под курсором
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

# Параметры запуска  vim:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
vim -o filename1 filename2 — запустить vim с двумя файлами, открытыми в горизонтальных окнах
vim -O filename1 filename2 — запустить vim с двумя файлами, открытыми в вертикальных окнах
vim -d filename1 filename2 — запустить vim с двумя файлами и сравнить их, подсветив отличия.

Помимо окон есть ещё вариант разложить открытые файлы по отдельным вкладкам (Tabs)
:tab ball — Поместить все открытые файлы во вкладки
:tabnew — Создать новую вкладку, чтобы не бить текущее окно на большое количество маленьких подокон
gt — (go to tab) Перейти на следующую вкладку
gT — (go to tab) Перейти на предыдущую вкладку
:tabn — Следующая вкладка
:tabp — Предыдущая вкладка
Ctrl+PageUp и Ctrl+PageDown — стандартные горячие клавиши для перемещения между табами, но они могут  быть заняты эмулятором терминала.

:set mouse=a — Если включить, то будет можно мышью выбирать вкладки, окна, и изменять их размер

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Редактирование текста
## VIM также имеет большое количество возможностей для быстрого редактирования.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Del, x - удаление символа под курсором;
X - удаление символа перед курсором;
u, :u — отмена последнего действия;
U — отменить все изменения, повлиявшие на текущую строку;
~ — перевести в верхний или нижний регистр в зависимости от текущего символа под курсором;
C — удалить от курсора и до конца строки с переходом в режим ввода;
D — удалить от текущего символа до конца строки;
dd — вырезать строку, на которой стоит курсор. Перед любой командой можно ввести числовой модификатор, который укажет сколько раз выполнить команду. Например: 3dd - удалит три строки начиная с текущей;
yy — копирует строку. Также можно использовать числовой модификатор;
p — вставить после текущей строки;
P — вставить перед текущей строкой;
<< — сдвиг влево текущей строки;
>> — сдвиг вправо текущей строки;
J — объединение текущей строки с последующей.
i — Insert, переход в режим вставки текста левее курсора
a — Append, переход в режим вставки текста правее курсора
A — App_end, переход в режим вставки текста в конец строки
R — Replace, переход в режим замены текста.
o — создать пустую строку под текущей и перейти к её редактированию.
O — создать пустую строку НАД текущей и перейти к её редактированию.
u — UNDO, отмена последнего действия
U — UNDO, отмена изменений только в последней строке
Ctrl+r — Redo, повторить отменённое действие текущего модального сеанса редактирования.
Многие команды, изменяющие текст, состоят из оператора и объекта. Например ниже оператор удаления d комбинируется с объектом направления удаления:
dw — (delete word) удалить от курсора до конца слова, включая последующий пробел.
de — удалить от курсора до конца слова, НЕ включая последующий пробел.
d$ — удалить от курсора до конца строки.
d^ — удалить от курсора до начала строки.
ce — удаляет слово и переводит в режим вставки.
c$ — удалить от курсора до конца строки и перейти в режим вставки (редактирования текста).

Ввод числа перед оператором приведёт к его повторению заданное количество раз.
d2w — Удаление двух слов подряд
x — Del, стереть символ под курсором.
dd — Удаление строки
D (Shift+d)— Вырезать в буфер содержимое от курсора до конца строки.
C (Shift+c)— Вырезать в буфер содержимое от курсора до конца строки и перейти в режим правки.

r — замена символа под курсором следующим за r
После нажатия r+символ возвращается в командный режим, что делает неудобным
использование для правки русского текста без адаптации командного режима
vim к русской раскладке клавиатуры.

diw — (delete inner word) удалить слово под курсором
ciw — (change inner word) заменить слово под курсором (удалить и перейти в режим редактирования)
cib — (change in brackets) Удалить выражение внутри скобок () и перейти к редактированию
c% — Вырезание выражения в парных скобках от курсора до следующих скобок. ( % это Shift+5 )
dit — (delete in tag) Удалить текст внутри html или xml тэга под курсором
cit — (change in tag) Заменить текст внутри html или xml тэга под курсором, (удал. и пер. в реж. ред.)
ce WORD Esc — вводить на первом символе какого-либо слова, чтобы заменить его на WORD. После по точке так можно будет сделать с любым.

d$ или D (Shift+d) — удаляет строку после курсора

db — удалить слово ДО курсора
di( — удаляет то что в скобочках.
di" — то, что в кавычках
ya( — копировать содержимое внутри скобок () вместе с самими скобками

s — Удалить символ под курсором и перейти в режим редактирования
S — Удалить все до конца строки и перейти в режим редактирования
d5d — удалить 5 строк от курсора вниз

Ctrl+a — Увеличить на единицу ближайшее справа число.
Ctrl+x — Уменьшить на единицу ближайшее справа число.
Vu — Перевести строку в нижний регистр
VU — Перевести строку в верхний регистр
g~~ — Инвертировать регистр

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Автодополнения:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Ctrl+p или Ctrl+n — автодополнение команд языков программирования
Ctrl+x Ctrl+f — файлы, они ищутся в текущем каталоге
Ctrl+x Ctrl+d — дефайны
Ctrl+x Ctrl+i — слова из текущего и открытых файлов
Ctrl+x Ctrl+k — из словаря
Ctrl+x Ctrl+] — все тэги
Ctrl+x Ctrl+o — omni completion, работает замечательно с C, Python и т.д.     
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

# Поиск:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
При достижении конца файла поиск будет продолжен с начала.

f — Поиск следующего за f символа справа в текущей строке
; — Повторить поиск по f, следующее найденное совпадение в текущей строке
/ — Поиск текста по образцу вперёд
? — Поиск текста по образцу назад
n — Следующее найденное совпадение
N — Предыдущее найденное совпадение
Ctrl+o — вернуться туда, откуда начали поиск
Ctrl+i — вернуться обратно к найденному после ctrl+o
% — Поиск парных скобок: (), [] или {}

/word	Искать слово “word” сверху вниз
?word	Искать слово “word” снизу вверх
/jo[ha]n>	Искать “john” или “joan”
/\< the	Искать слова, начинающееся на “the”
/the\>	Искать слова, заканчивающиеся на “the”
/\< the\>	Искать “the” (точное соответствие)
/\< …. \>	Искать слова из четырех символов
/fred\|joe	Искать “fred” или “joe”
/\<\d\d\d\d\>	Искать 4 цифры подряд
/^\n\{3}	Искать 3 пустые строки
:bufdo /searchstr/	Искать во всех открытых файлах
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Поиск и замена:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

:s/было/стало — Поиск и замена только первого найденного совпадения в текущей строке
:s/было/стало/g — Поиск и замена всех найденных в текущей строке совпадений
:g/string/d Удалить все строки, содержащие «string”
:v/string/d Удалить все строки, не содержащие „string”:30,90s/было/стало/gc — поиск и замена с 30 по 90 строку по всей их длине, с подтверждением
:%s/было/стало/gc — поиск и замена во всём файле с подтверждением.

То есть :s/ — текущая строка, :30,90s/ — диапазон, :%s/ — весь файл.
g — во всей строке, c — с подтверждением, иначе только первое совпадение в строке, и без подтверждений.
Можно не писать каждый раз команду заново, достаточно ввести : двоеточие и стрелками курсора вверх-вниз перебирать ранее введённые варианты.
Выделение:

v — (visual) визуальный выбор, выделение фрагмента текста для операции над ним.
Ctrl+v — выделение прямоугольных блоков.
gv — Повторное выделение последнего выделенного фрагмента.d — удаление выделенного фрагмента
c — Вырезать выделенный фрагмент в буфер обмена
y — (yank) копирование выделенного фрагмента
yw — копирование одного слова от позиции курсора до конца слова вместе с пробелом.
p — (paste) вставка скопированного фрагмента
vip — Выделить целиком текущий параграф (разделённый пустыми строками текст)
vgU — выделить в визуальном режиме фрагмент и перевести его в верхний регистр.
vg~ — Выделить в визуальном режиме фрагмент и ИНВЕРТИРОВАТЬ его регистр.

Комбинации ниже работают для выделенного фрагмента. Для одиночной строки нажать дважды. Изменить длину отступа с 8 на 4 можно через конфиг, либо введя в командном режиме :set tabstop=4
Почему-то не работают для комментариев #
< (Shift+,) — Уменьшить отступ выделенного.
> (Shift+.) — Увеличить отступ выделенного.



:%s/old/new/g	Заменить все вхождения “old” на “new”
:%s/old/new/gw	Заменить все вхождения “old” на “new” с запросом подтверждения
:2,35s/old/new/g	Заменить все вхождения “old” на “new” между 2 и 35 строками
:5,$s/old/new/g	Заменить все вхождения “old” на “new” начиная с 5 строки и до конца файла
:%s/^/hello/g	Добавить “hello” в начало каждой строки
:%s/$/Harry/g	Добавить “Harry” в конец каждой строки
:%s/onward/forward/gi	Заменить “onward” на “forward” с учетом регистра
:%s/ *$//g	Убрать все пробелы
:g/string/d	Удалить все строки, содержащие “string”
:v/string/d	Удалить все строки, не содержащие “string”
:s/Bill/Steve/	Заменить первое вхождение “Bill” на “Steve” в текущей строке
:s/Bill/Steve/g	Заменить все вхождения “Bill” на “Steve” в текущей строке
:%s/\r//g	Убрать символ возврата каретки (Такие тексты обычно приходят от windows-пользователей)
:%s#>[^<]\+>##g	Очистить текст от HTML-тегов
:%s/^\(.*\)\n\1$/\1/	Удалить строки, повторяющиеся дважды
Ctrl+a	Увеличить число под курсором на единицу
Ctrl+x	Уменьшить число под курсором на единицу
ggVGg?	Преобразовать текст в Rot13
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Для программистов
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
:set number — включить отображение номеров строк;
:set nonumber — отключить отображение номеров строк;
= — расстановка отступов для языка программирования С.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
# Файловые операции:
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
:w — сохранить изменения в текущий файл
:w file.txt — сохранить в файл file.txt
:w! file.txt — сохранить и перезаписать file.txt, если существует.
:w~/file.txt — сохранить в файл file.txt в домашней папке
:e — Переоткрыть текущий файл.
:e file.txt — открыть файл file.txt.
:ene — Создать новый файл.
:ene file.txt — Создать файл file.txt.

Для сохранения фрагмента, выделить его по клавише v и сохранить с указанием имени как выше. Командная строка будет иметь вид подобный :'<,'>w file.txt
:r file.txt — вставить содержимое файла file.txt в позицию ниже курсора
:r!ls — вставить вывод внешней команды ls.
:! ls — выполнить любую внешнюю команду, в данном случае ls
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
